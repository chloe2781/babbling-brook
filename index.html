<!DOCTYPE html>
<html>

<style>
    body {
        margin: 60px;
        margin-right: 120px;
        margin-bottom: 90px;
    }

    h1{
        text-align: center;
        font: 3em futura, sans-serif;
    }
    
    h2 {
        text-align: left;
        font: 2em arial, sans-serif;
    }

    p, li, ol {
        text-align: left;
        font: 1em roboto, sans-serif;
        font-weight: 300;
    }
    li {
        margin-left: 20px;
    }
    
    code {
        color: maroon;
        font-size: 1.2em;
    }

    #tab {
        margin-left: 20px;
    }

    .play-button {
        width: 100px;
        height: 100px;
        background-color: #4CAF50;
        border: none;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        position: fixed;
        bottom: 15%;
        right: -2%;
        transform: translate(-50%, -50%);
    }

    .play-button2 {
        width: 100px;
        height: 100px;
        background-color: #4CAF50;
        border: none;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        position: fixed;
        bottom: -2%;
        right: -2%;
        transform: translate(-50%, -50%);
    }

    .play-button:hover {
        cursor: pointer;
    }

    .play-button2:hover {
        cursor: pointer;
    }

</style>
    
</style>

<head>
    <title>Babbling Brook</title>
    
</head>
<body>
    <h1>Babbling Brook and Robot Sound</h1>
    <p style="text-align: center;">A blog by Chloe Nguyen</p>
    <h2>Part 1: Babbling Brook Sound</h2>
    <p>The gentle babbling of a brook, with its soothing bubbly sound, is a sound that 
        connects us with nature and induces a sense of tranquility. 
        In an attempt to recreate this serene auditory experience, I not only crafted a code that 
        utilizes Web Audio  to generate a digital representation of a babbling brook, but also grew to hate this sound.
        <br><br> Let's delve into the key components of the code to understand how this 
        tranquil soundscape was achieved, following this orginal SCD code: </p>

    <br>
    <code> {RHPF.ar(LPF.ar(BrownNoise.ar(), 400), LPF.ar(BrownNoise.ar(), 14) * 400 + 500, 0.03, 0.1)}.play </code>
    <br>
    <p><br>1. The babbling brook sound is generated by a series of RHPF and LPF, which are:</p>
        <li> 3 LPFs with each frequency value of: 400, 14, 10 </li>
        <li> 1 RHPF with the frequency value of 500 and Q value of 1/0.03 </li>
        <li> 3 gains with each with gain value of: 0.1, 400, 1500 </li>
        <li> 1 Brown Noise buffer source </li>
    <p>2. Then the components are connected like this figure below: </p>
    <img src="babbling_brook.png" alt="babbling-brook" height="300">
    <p> It sounds very close to the orginal sound and I'm very proud of it, but I also 
        feel like it sounds like a sheet of metal is being shaken. </p>
    </p>

    <h2>Part 2: Robot Sound, Beep Boop</h2>
    <p> I first attempt the fire sound, but it was too complicated for my own good with 
        the hissing noise, crackling of the fire/wood, and the flickering of the flame, along with 
        the splitting and envelopping of the sound. I tried for a while and most of the time the sound
        either stays as a hissing noise or inaudible, so I decided to switch to a simpler sound, the phone busy signal.
        <br>The phone busy signal is a sound that is quite familiar to me, as I have heard it many times
        when I was younger. It is a very annoying and frustrating sound, but also very nostalgic.
        <br> After trying very hard to recreate the fire sound, I find the busy signal extremely easy to recreate. It was:
    </p>
    <li> 1 sine wave oscillator with the frequency value of 440 </li>
    <li> 1 bandpass filter of frequency 1000 and Q value of 10</li>
    <p> The connection is as simple as this: </p>
    <br>
    <code> 
        oscillator.connect(filter);<br>
        filter.connect(audioCtx2.destination); 
    </code>
    <p><br> However, I thought this is really boring so I played around with the code for a bit and added a 
        gain node and a delay node along with randomness in many values to make it sound more interesting. 
        Here's a snippet of what I added:
    </p>
    <br>
    <code>
        const gain = audioCtx2.createGain();<br>
        gain.gain.value = 0.5 + Math.random() * 0.8;<br> <br>

        const delay = audioCtx2.createDelay();<br>
        delay.delayTime.value = 0.1 + Math.random() * 0.4;<br><br>

        const now = audioCtx2.currentTime;<br>
        for (let i = 0; i < 200; i++) {<br>
        <div id="tab">
            const time = now + i*0.11;<br>
            const frequency = 60 + Math.random() * 1000;<br>
            oscillator.frequency.setValueAtTime(frequency, time);<br>
        </div>
        }<br>
    
    </code>
    <p><br> And this code is connected in the following figure:</p>
    <img src="beep_boop.png" alt="beep-boop" height="130">

    <p>Here's a breakdown of what the code does:</p>
        <ol>
            <li> 
                It sets the type of the filter to 'bandpass' and sets the center frequency to a random value 
                between 500 and 1500 Hz.
            </li>
            <li> 
                It creates a new GainNode object and sets the gain to a random value between 0.5 and 1.3. 
            </li>
            <li> 
                It creates a new DelayNode object and sets the delay time to a random value between 0.1 and 0.5 seconds.
            </li>
            <li>
                It schedules a series of random frequency changes for the oscillator using the setValueAtTime() method. 
                The loop runs 200 times and sets a new frequency value for each iteration. 
                The time and frequency values are calculated using the current time of the audio context and a random frequency value between 60 and 1060 Hz.
            </li>
        </ol>

    <p>
        Overall, this code generates a random noise sound by creating an oscillator with a random frequency, 
        filtering the sound with a resonant bandpass filter, adding gain and delay effects, and scheduling a series of random frequency changes for the oscillator, 
        and finally, making the robot's beep boop noise. 

        I compared and tuned this robot sound a lot to ones on Youtube and I think I got pretty close to the sound that I wanted to recreate!
        I'm satisfied with the interesting sound it's making!

    </p>
    <button class="play-button" id="babbling-brook">Babbling Brook</button>
    <button class="play-button2" id="more-noise">Beep Boop</button>

    <script src="main.js"></script>
</body>
</html>

